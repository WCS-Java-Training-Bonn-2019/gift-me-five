<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="UTF-8" />
<link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<header th:fragment="navigation">
	<!-- (view, myWishlists, thisWishlistId) -->
	<nav
		class="GM5_header_left_nav navbar navbar-expand-lg navbar-light bg-light">
		<button class="navbar-toggler" type="button" data-toggle="collapse"
			data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup"
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
			<div class="navbar-nav">
				<a class="navbar-brand" href="/">Gift me five</a> <a
					th:class="${view=='newWishlist'} ? 'nav-item nav-link active GM5_header_left_nav_active' : 'nav-item nav-link'"
					th:href="@{/wishlist}">New Wishlist</a>
				<div sec:authorize="isAuthenticated()">
					<!-- Dropdown for My Wishlists -->
					<a
						th:class="(${view=='receiver'} ? 'nav-item nav-link active GM5_header_left_nav_active' : 'nav-item nav-link') + ' dropdown-toggle'"
						data-toggle="dropdown" href="#">My Wishlists</a>
					<div class="dropdown-menu">
						<a th:each="wishlist : ${myWishlists}" th:object="${wishlist}"
							th:class="'dropdown-item' + (*{id}==${thisWishlistId} ? ' active' : ' ')"
							th:text="*{title}" th:href="@{/receiver(id=*{id})}">Ben's
							Xmas</a>
					</div>
				</div>
				<a sec:authorize="isAuthenticated()"
					th:class="${view=='giver'} ? 'nav-item nav-link active GM5_header_left_nav_active' : 'nav-item nav-link'"
					href="/giver">Friend's Wishlists</a>
				<!-- Dropdown for Friend's Wishlists -->
				<div sec:authorize="hasRole('ROLE_admin')">
					<!-- Dropdown for Admin -->
					<!-- class="navbar-nav dropdown " -->
					<a
						th:class="(${view=='admin'} ? 'nav-item nav-link active GM5_header_left_nav_active' : 'nav-item nav-link') + ' dropdown-toggle'"
						href="#" role="button" data-toggle="dropdown">Admin</a>
					<!-- aria-haspopup="true" id="dropdownMenuLink" aria-expanded="false" -->
					<div class="dropdown-menu">
						<!-- aria-labelledby="dropdownMenuLink" -->
						<a class="dropdown-item" href="/admin/user">User</a><a
							class="dropdown-item" href="/admin/wish">Wish</a> <a
							class="dropdown-item" href="/admin/wishlist">Wishlist</a>
					</div>
				</div>
			</div>
		</div>
	</nav>
	â€‹
	<nav class="GM5_header_right_nav">
		<div class="GM5_header_right_nav_logged_in"
			sec:authorize="isAuthenticated()">
			<span sec:authentication="name"></span>
			<!-- Add a logout icon -->
			<form action="#" th:action="@{/logout}" method="POST" title="Logout">
				<button type="submit" class="GM5buttonGreen">
					<img src="pics/Logout-512-white.png">
				</button>
			</form>
						
			<!-- do not show role  <br> Role(s): <span
							sec:authentication="principal.authorities"></span> <br>
						-->
		</div>

		<div sec:authorize="isAnonymous()">

			<div th:fragment="loginButton" class="btn-group dropleft">
				<button type="button"
					class="GM5login_frame btn btn-secondary dropdown-toggle"
					data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
					title="Login">
					<img th:src="@{/pics/User_account_Login_free_icon_1.png}">
				</button>
				<div class="dropdown-menu">
					<form th:action="@{/authenticateTheUser}" method="POST"
						class="px-4 py-3">


						<!-- Add User Name Login -->
						<div class="form-group">
							<!-- 
						<label for="exampleDropdownFormEmail1">E-Mail</label>
						 -->
							<input type="text" class="form-control"
								id="exampleDropdownFormEmail1" placeholder="E-Mail"
								name="username">
						</div>
						<!-- Add Password Login -->
						<div class="form-group">
							<!-- 
						<label for="exampleDropdownFormPassword1">Password</label> 
						 -->
							<input type="password" class="form-control"
								id="exampleDropdownFormPassword1" placeholder="Password"
								name="password">
						</div>

						<div class="form-check">
							<input type="checkbox" class="form-check-input"
								name="remember-me" id="dropdownCheck"> <label
								class="form-check-label" for="dropdownCheck">Remember me
							</label>
						</div>

						<button type="submit" class="btn btn-primary GM5buttonGreen">
							<img src="pics/Login-512-white.png">
						</button>
					</form>
					<div class="dropdown-divider"></div>
					<a class="dropdown-item" title="Registration" href="#">New
						around here? Sign up</a> <a class="dropdown-item"
						title="Password Recovery" href="#">Forgot password?</a>
				</div>
			</div>
		</div>
	</nav>
</header>
</html>